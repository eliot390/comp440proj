<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>All Users</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<div id="main">
    <form id="itemForm">
        <input name="title" placeholder="Title" required><br>
        <textarea id="textbox" name="description" placeholder="Description"></textarea><br>
        <input name="category" placeholder="Category"><br>
        <input name="price" type="number" step="0.01" placeholder="Price"><br>
        <input name="username" placeholder="Username (who's logged in)"><br>
        <button type="submit">Add Item</button>
    </form>
</div>

<script>
    document.getElementById('itemForm').addEventListener('submit', async function (e) {
      e.preventDefault();
      const formData = new FormData(this);
      const data = {
        title: formData.get('title'),
        description: formData.get('description'),
        category: formData.get('category'),
        price: parseFloat(formData.get('price'))
      };

      const username = formData.get('username');

      const res = await fetch(`/items/add?username=${encodeURIComponent(username)}`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });

      alert(await res.text());
    });
</script>
</body>
</html>
