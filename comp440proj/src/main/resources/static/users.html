<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>All Users</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<h1>Registered Users</h1>
<table border="1" id="usersTable">
    <thead>
    <tr>
        <th>Username</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Email</th>
    </tr>
    </thead>
    <tbody></tbody>
</table>

<script>
    async function loadUsers() {
      try {
        const res = await fetch('/users');
        if (!res.ok) {
          throw new Error('Failed to load users');
        }
        const users = await res.json();

        const tbody = document.querySelector('#usersTable tbody');
        users.forEach(user => {
          const row = document.createElement('tr');
          row.innerHTML = `
            <td>${user.username}</td>
            <td>${user.firstName}</td>
            <td>${user.lastName}</td>
            <td>${user.email}</td>
          `;
          tbody.appendChild(row);
        });
      } catch (err) {
        document.body.innerHTML = "<p>Error loading users. You may not be logged in.</p>";
      }
    }

    loadUsers();
</script>
</body>
</html>
